{
  "name": "@supabase/storage-js",
  "targets": {
    "test:clean-pre": {
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase stop --no-backup --workdir {projectRoot}/test || true"
      }
    },
    "test:infra": {
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase start --workdir {projectRoot}/test && npx supabase db reset --workdir {projectRoot}/test && sleep 20"
      },
      "dependsOn": ["test:clean-pre"]
    },
    "test:suite": {
      "executor": "nx:run-commands",
      "options": {
        "command": "jest --runInBand --coverage",
        "cwd": "{projectRoot}"
      },
      "outputs": ["{projectRoot}/coverage"],
      "dependsOn": ["test:infra"]
    },
    "test:clean-post": {
      "executor": "nx:run-commands",
      "options": {
        "command": "npx supabase stop --no-backup --workdir {projectRoot}/test || true"
      },
      "dependsOn": ["test:suite"]
    },
    "test:storage": {
      "executor": "nx:run-commands",
      "options": {
        "command": "echo 'Storage tests complete'",
        "cwd": "{projectRoot}"
      },
      "dependsOn": ["test:clean-post"]
    }
  }
}
